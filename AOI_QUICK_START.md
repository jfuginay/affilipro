# AOI Management - Quick Start Guide

## What You Get

When you click the OmniCOT plugin button, you now see an **AOI Management Dashboard** instead of a simple text view.

## Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AOI Management          [Refresh]  â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ My Target Area        Circle  â”‚ â”‚  â† AOI Card
â”‚  â”‚ Area: 2.5 kmÂ²                 â”‚ â”‚
â”‚  â”‚ Center: 38.12345, -77.56789   â”‚ â”‚
â”‚  â”‚              [Zoom To] [Delete]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Search Zone      Rectangle    â”‚ â”‚  â† Another AOI
â”‚  â”‚ Area: 1.8 kmÂ²                 â”‚ â”‚
â”‚  â”‚ Center: 38.54321, -77.98765   â”‚ â”‚
â”‚  â”‚              [Zoom To] [Delete]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Patrol Route      Polygon     â”‚ â”‚  â† Another AOI
â”‚  â”‚ Area: 0.3 kmÂ²                 â”‚ â”‚
â”‚  â”‚ Center: 38.99999, -77.11111   â”‚ â”‚
â”‚  â”‚              [Zoom To] [Delete]â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## If No Shapes Exist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AOI Management          [Refresh]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚           [AOI Icon]                â”‚
â”‚                                     â”‚
â”‚        No AOIs Found                â”‚
â”‚                                     â”‚
â”‚  To create an Area of Interest:    â”‚
â”‚                                     â”‚
â”‚  1. Tap the Drawing Tools icon      â”‚
â”‚     on the map                      â”‚
â”‚  2. Select Rectangle, Circle,       â”‚
â”‚     or Freehand                     â”‚
â”‚  3. Draw your AOI on the map        â”‚
â”‚  4. Return here to manage it        â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## How to Use

### Create an AOI
1. Close the dashboard (or leave it open)
2. On the ATAK map, tap the **Drawing Tools** button
3. Select a shape type:
   - Rectangle
   - Circle  
   - Freehand/Polygon
4. Draw the shape on the map
5. Give it a name/callsign (optional)

### View All AOIs
1. Tap the **OmniCOT plugin button** on toolbar
2. Dashboard shows all shapes as cards
3. Scroll through the list

### Zoom to an AOI
**Two ways:**
- Tap anywhere on the AOI card
- Tap the **"Zoom To"** button

The map will automatically:
- Pan to the AOI's center
- Adjust zoom to show the entire shape

### Delete an AOI
1. Tap the **"Delete"** button on any card
2. The shape is removed from the map immediately
3. The list refreshes automatically
4. Toast message confirms deletion

### Refresh the List
- Tap the **"Refresh"** button in the header
- Useful after drawing new shapes
- Updates the list with latest map data

## Card Information

Each AOI card shows:
- **Name**: The shape's callsign/title (or "Unnamed AOI")
- **Type Badge**: Circle, Rectangle, Polygon, or Freehand
- **Area**: Size in square meters or square kilometers
- **Center**: Latitude/Longitude coordinates
- **Actions**: Zoom To and Delete buttons

## Color Coding

- **Orange badge**: Shape type indicator
- **White text**: Primary information
- **Gray text**: Labels
- **Red text**: Delete button (warning color)
- **Dark cards**: Match ATAK's dark theme

## Tips

âœ… **Click the entire card** to quickly zoom to an AOI (fastest method)

âœ… **Use Refresh** after drawing multiple shapes to see them all

âœ… **Area is approximate** for geographic shapes (good enough for tactical use)

âœ… **Empty state instructions** help new users understand how to create AOIs

âœ… **Monospace coordinates** make lat/long easier to read

## Integration with Existing Features

The AOI Management feature works alongside:
- âœ… Affiliation changing (still works via radial menu)
- âœ… COT broadcasting (unchanged)
- âœ… All other ATAK functionality

## Architecture Flow

```
User clicks plugin button
         â†“
OmniCOTPlugin.showPane()
         â†“
AoiManager.getAllAois()
         â†“
Searches all MapGroups recursively
         â†“
Finds DrawingCircle, DrawingRectangle, Shape
         â†“
Creates AoiInfo objects
         â†“
AoiAdapter displays in RecyclerView
         â†“
User taps "Zoom To"
         â†“
AoiManager.zoomToAoi()
         â†“
Map pans and zooms to shape
```

## File Structure

```
plugin/
â”œâ”€â”€ AoiInfo.java           â† Data model
â”œâ”€â”€ AoiManager.java        â† Find & manage shapes
â”œâ”€â”€ AoiAdapter.java        â† Display cards
â””â”€â”€ OmniCOTPlugin.java     â† Main plugin (updated)

res/layout/
â”œâ”€â”€ aoi_management_layout.xml  â† Dashboard
â””â”€â”€ aoi_card_item.xml          â† Individual cards

res/drawable/
â””â”€â”€ icon_aoi.xml           â† AOI icon

res/values/
â””â”€â”€ strings.xml            â† Text resources (updated)
```

## What Happens Behind the Scenes

1. **When dashboard opens:**
   - Queries ATAK's map group hierarchy
   - Finds all shapes (circles, rectangles, polygons)
   - Calculates area for each shape
   - Creates card for each AOI
   - Shows empty state if none found

2. **When you tap "Zoom To":**
   - Gets shape bounds (min/max lat/long)
   - Calculates center point
   - Determines appropriate zoom level
   - Animates map to position

3. **When you tap "Delete":**
   - Removes shape from its map group
   - Refreshes the list
   - Updates empty state visibility
   - Shows toast confirmation

## Next Steps

You can now:
1. Build the plugin (if needed, run `./gradlew assembleCivDebug`)
2. Install on ATAK device
3. Draw some shapes on the map
4. Open OmniCOT plugin to see the dashboard
5. Interact with your AOIs!

Enjoy managing your Areas of Interest! ğŸ—ºï¸
